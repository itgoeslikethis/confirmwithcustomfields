<html>
<head>
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript">
    $(function () {
        var nameMatch = location.search.match(/name=([^&]+)/),
            emailMatch = location.search.match(/email=([^&]+)/),
            interests = location.search.match(/interests=([^&]+)/),
            interestsArray, $interestsLabels;

        if (nameMatch && nameMatch[1].length > 0) {
            $("#fieldName").val(' ' + decodeURIComponent(nameMatch[1]));
        }
        if (emailMatch && emailMatch[1].length > 0) {
            $("#fieldEmail").val(' ' + decodeURIComponent(emailMatch[1]));
        }
        if (interests && interests[1].length > 0) {
            interestsArray = decodeURIComponent(interests[1]).split(',');
            // grab all the labels from the html - we'll use those to see if there's a match
            // because the input elements themselves don't contain the text
            $interestsLabels = $("label[for^='fieldjkjhklr-'");
            for (var i=0; i< interestsArray.length; i++) {
                $interestsLabels.each(function(index, labelElem) {
                    var $that = $(labelElem), inputID;
                    if (interestsArray[i] === $that.text()) {
                        inputID = $that.attr('for'); // get the input that the label matches
                        $('#' + inputID).prop('checked', true);
                    }
                });
            }
        }
        $("#signups").submit();
    });
</script>
</head>
<body>
<form action="http://itgoeslikethis.sendhtml.org/t/r/s/tkdiidk/" method="post" id="signups">
    <p>
        <label for="fieldName">Name</label><br />
        <input id="fieldName" name="cm-name" type="text" />
    </p>
    <p>
        <label for="fieldEmail">Email</label><br />
        <input id="fieldEmail" name="cm-tkdiidk-tkdiidk" type="email" required />
    </p>
    <p><label>Interests</label><br />
        <input id="fieldjkjhklr-0" name="cm-fo-jkjhklr" value="4780957" type="checkbox" /> <label for="fieldjkjhklr-0">Politics</label><br />
        <input id="fieldjkjhklr-1" name="cm-fo-jkjhklr" value="4780958" type="checkbox" /> <label for="fieldjkjhklr-1">Religion</label><br />
        <input id="fieldjkjhklr-2" name="cm-fo-jkjhklr" value="4780959" type="checkbox" /> <label for="fieldjkjhklr-2">Basket-Weaving</label>
    </p>
    <p>
        <button type="submit">Subscribe</button>
    </p>
</form>
</body>
</html>
